<?xml version="1.0" encoding="UTF-8" ?>

<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
<channel>
   
      <title>sidhant.io</title>
   
   <link>http://sidhant.io</link>
   <description>Developer Chronicles</description>
   <language>en-us</language>
   <managingEditor> Sidhant Sharma</managingEditor>
   <atom:link href="rss" rel="self" type="application/rss+xml" />
   
	<item>
	  <title>KISS: Keep It Short and Simple</title>
	  <link>sidhant.io/kiss-keep-it-short-and-simple</link>
	  <author>Sidhant Sharma</author>
	  <pubDate>2017-01-06T00:00:00+05:30</pubDate>
	  <guid>sidhant.io/kiss-keep-it-short-and-simple</guid>
	  <description><![CDATA[
	     <blockquote>
  <p>We are moving from a world where computing power was scarce to a place where it now is almost limitless, and <strong>where the true scarce commodity is increasingly human attention</strong><br />
– <a href="https://en.wikipedia.org/wiki/Satya_Nadella">Satya Nadella</a></p>
</blockquote>

<p>A painfully accurate quote by the CEO of one of the largest software companies out there, research has indeed discovered that the average human attention span has dropped from 12 seconds in 2000 to a mere 8.25 seconds in 2015 <sup><a href="https://advertising.microsoft.com/en/wwdocs/user/display/cl/researchreport/31966/en/microsoft-attention-spans-research-report.pdf">[1]</a></sup>. Yep, that’s 0.75 seconds lower than that of a goldfish.<br />
Studies also show that the average reading speed for humans is roughly 240 WPM (Words per Minute) for the English language <sup><a href="http://iovs.arvojournals.org/article.aspx?articleid=2166061#90715174">[2]</a></sup>. Of course, the results vary for different languages, but it gives us an idea of the approximate WPM we can read. Multiply that by the average attention span and you’ll get the number of words a person would probably read before scrolling away from the text. That number comes out to be about 33. So, you’re very likely to have lost your reader’s attention by the 40<sup>th</sup> word or so; just like I have lost yours, right about now (or have I?).<br />
In such a time where people are unlikely to read long texts, the KISS principle becomes our only hope to convey our message in 40 words or less. Enter, Automatic Text Summarization.</p>

<p>In my final year of college, we are supposed to work on a project for 2 semesters, preferably trying to solve a real world problem. And what better a problem to solve than that of communicating with fellow humans quickly and effectively. We, a group of 4, decided to take up a project on Text Summarization, a subfield of Natural Language Processing.</p>

<h3 id="introduction">Introduction</h3>

<p>A summary can defined as <em>“a text that is produced from one or more texts, that conveys important information in the original text(s), and that is no longer than half of the original text(s) and usually significantly less than that”</em>. Automatic text summarization is the process of extracting such a summary from given document(s).</p>

<p>Summarization can be categorised broadly as either extractive or abstractive. Extractive summaries carry the information taken from the original keywords, phrases or sentences present in the original document. Abstractive summarization involves the creation of novel sentences that highlight main ideas of the original document. Although it is obvious that human generated summaries are typically abstractive, majority of the summarization research is on extractive summarization. It is important to note that extractive summarization systems give results better than abstractive summarization systems. This is primarily due the inherent problems in abstractive summarization, such as semantic representation, inference and natural language generation which are relatively harder compared to a data-driven approach such as sentence or keyword extraction. However, assignment and extraction of high quality keywords manually itself is an expensive and time-consuming task.<br />
For our project, we took what can be called, a hybrid approach. We divided our project into two segments, the first where would find the best technique to extract keywords from a given text. In the second, we would use those keywords to create abstractive summaries (we intend to use neural networks for natural language generation). There are various algorithms for automatic keywords extraction that have been developed to save time and effort. We selected and compared performance of three popular keyword extraction techniques. The competing algorithms are <em>(drum rolls…)</em> <strong>TextRank</strong>, <strong>LexRank</strong> and <strong>LSA</strong> (Latent Semantic Analysis).  </p>

<h4 id="textrank">TextRank</h4>
<p>In their paper “TextRank: Bringing Order into Texts”, Rada Mihalcea and Paul Tarau <sup><a href="https://web.eecs.umich.edu/~mihalcea/papers/mihalcea.emnlp04.pdf">[3]</a></sup> introduced TextRank as the first graph-based automated text summarization algorithm. TextRank algorithm is a simple application of PageRank algorithm. I won’t be going into the details of PageRank, TextRank or the equations involved in the computations of keyword weights for the fear of boring you to death (read the paper if you’re curious, it’s really nice). However, I can show you an image that might help you in getting an idea of what TextRank does. The following image is a graph that was created from a text on diophantine equations and inequations (no idea what that is, but it works).</p>

<p><img src="/assets/images/post_images/text_rank.png" alt="TextRank" style="width: 75%" /><br />
The graph made above would then be subject to PageRank algorithm, which would eventually give us “numbers”, “inequations”, “linear”, “diophantine”, “upper”, “bounds”, “strict” as keywords. Neat!</p>

<h4 id="lexrank">LexRank</h4>

<p>LexRank is another graph-based algorithm for automated text summarization, introduced by Güneş Erkan and Dragomir R. Radev <sup><a href="http://www.jair.org/papers/paper1523.html">[4]</a></sup> A cluster of documents can be viewed as a network of sentences that are related to each other. Some sentences are more similar to each other while some others may share only a little information with the rest of the sentences. Like TextRank, LexRank too uses the PageRank algorithm for extracting top keywords. The key difference between the algorithms is the weighting function used for assigning weights to the edges of the graph. While TextRank simply assumes all weights to be unit weights and computes ranks like a typical PageRank execution, LexRank uses degrees of similarity between words and phrases and computes the centrality of the sentences to assign weights. Again, I wouldn’t delve in the details of the algorithm’s governing equations, as it would easily make this post thrice as long as it already is. You may read research paper by Erkan and Radev cited above if interested.</p>

<h4 id="lsa">LSA</h4>

<p>Another popular and effective extractive summarization approach developed was the use of Latent Semantic Analysis for generating text summaries. Latent semantic analysis (LSA) is a technique in natural language processing, in particular distributional semantics, of analyzing relationships between a set of documents and the terms they contain by producing a set of concepts related to the documents and terms. LSA assumes that words that are close in meaning will occur in similar pieces of text. LSA found its use in text summarization when Josef Steinberger and Karel Ježek <sup><a href="http://www.kiv.zcu.cz/~jstein/publikace/isim2004.pdf">[5]</a></sup> demonstrated its effectiveness in extracting summaries keywords from textual data. They introduced a generic summarization technique which uses the latent semantic analysis technique to identify semantically important sentences.</p>

<h3 id="the-experiment">The Experiment</h3>

<p>The first step for testing the effectiveness of these algorithms was selecting a dataset. The text should not be too specific about any particular genre of writing, nor be too generic to be summarized. After searching and comparing multiple datasets, we finalised the <a href="http://kavita-ganesan.com/opinosis-opinion-dataset">Opinosis Dataset</a> for use in our project. The dataset contains 51 review articles, each about 100 sentences long, obtained from Tripadvisor, Edmunds.com and Amazon.com. The second salient feature of the dataset is that it comes with a set of 4 to 5 hand written summaries of each of these articles, courtesy of the authors of the dataset <sup><a href="http://delivery.acm.org/10.1145/1880000/1873820/p340-ganesan.pdf?ip=122.161.24.15&amp;id=1873820&amp;acc=OPEN&amp;key=4D4702B0C3E38B35%2E4D4702B0C3E38B35%2E4D4702B0C3E38B35%2E6D218144511F3437&amp;CFID=713303441&amp;CFTOKEN=61375673&amp;__acm__=1483690699_8134883f16f7700da0b0ca25aef6b57e">[6]</a></sup>. These summaries provide a perfect standard for comparing the relative performance of other algorithms.<br />
Without explaining all of the code, I’ll quicky run you through the setup, which looks like this:</p>

<p><img src="/assets/images/post_images/ats_system_setup.png" alt="" /></p>

<p>The text is first preprocessed to strip out <a href="https://en.wikipedia.org/wiki/Stop_words">stopwords</a> and stem the words (using Porter2 English Snowball Stemmer) for removing word derivatives. These steps are an important part of any natural language processing activity as they remove the unimportant words and allow the algorithm to focus on root words instead of different forms of the same word.<br />
Having preprocessed the texts, we can now feed them to the algorithms implementations. The algorithms were implemented in Python using the <code class="highlighter-rouge">sumy</code> python library. Each of the algorithms then output a set of keywords which were stored for evaluation.</p>

<h3 id="evaluation">Evaluation</h3>

<p>To evaluate the performance of the algorithms, we need a set of ‘gold’ keywords to compare the extracted keywords against. Here we used the human generated summaries to extract most frequent keywords. Only the keywords that appeared in more than half of the summaries were selected as ‘gold’ keywords for that particular article. We also measured the running time of each of the algorithms on the dataset.</p>

<p>The evaluation metric we used was ROUGE-N metric from the <a href="http://www.berouge.com/Pages/default.aspx">ROUGE toolkit</a>. Since we are considering only single-word keywords, N is set to unity. In essence, the ROUGE-1 parameters simply computes the ratio of number of keywords correctly indentified (i.e. keywords in sample that also occur in the gold set) to the total number of gold reference set keywords.</p>

<h3 id="results">Results</h3>

<p>The following image summarizes our results (summary of a summarization experiment, so meta…):<br />
<img src="/assets/images/post_images/ats_results.png" alt="" /></p>

<p>The blue horizontal line denotes the ROUGE-1 score of human generated summaries calculated by k-fold cross validatoin of each of the summa for every topic. As we can see, TextRank came out to be the winner. With a modest running time and a near-human ROUGE-1 score, TextRank was finally selected as our keyword extraction technique for the second phase of the project.</p>

<p>The code is available on <a href="https://github.com/TigerKid001/text_summarization_major">Github</a>.</p>

<p>That’s all for now folks. Expect another post on this subject once we’re done with second part too. We’ll try to make a research paper out of it, if our work is any good. Till then,  </p>

<blockquote>
  <p><em><img src="/assets/images/vulcan_salute.png" alt=":vulcan_salute:" style="height: 1.75em; margin: 0px; padding: 0;display: inline-block; position: inherit; transform: translateX(0);" />    Live Long and Prosper</em></p>
</blockquote>

	  ]]></description>
	</item>

	<item>
	  <title>Alfred appreciation post</title>
	  <link>sidhant.io/alfred-appreciation-post</link>
	  <author>Sidhant Sharma</author>
	  <pubDate>2016-05-23T00:00:00+05:30</pubDate>
	  <guid>sidhant.io/alfred-appreciation-post</guid>
	  <description><![CDATA[
	     <p>This post, as the name suggests, is more of an appreciation post. Today, I’m appreciating Alfred. Who’s Alfred, you ask? Well Alfred is my butler!</p>

<p>Nah, not really. I don’t have a butler. But what I do have is nothing short of a butler when it comes to serving files on a network. <a href="https://github.com/tigerkid001/alfred">Alfred</a> is a simple, easy to use command line tool I made sometime ago to, well, share files on a network. ‘Why, oh why’ you ask, when there’s already a million local network sharing applications out there. Two reasons; one, I needed a light local-network file sharing utility that’s simple enough to get going without any configurations and yet good enough to serve multiple files and folders to a number of users. And second, I wanted hands-on with Python, this was a fairly easy task, and a little motivation from someone very awesome, I was convinced I wanted to do this. Now, of course, I could just use Python’s default <a href="https://docs.python.org/2/library/simplehttpserver.html">SimpleHTTPServer</a>, but that plan goes straight out the window when you want to share the files with like a dozen of your friends (taking turns to download isn’t a thing). Ergo, Alfred. Though it was never meant to be anything worth blogging about, I clung to it long enough to make it a useful daily use tool. Alfred can handle multiple connections at once, and over the time, evolved into a pretty nice utility that I practically use everyday. So here’s some stuff Alfred can do:</p>

<p><strong>Serve directories (the basics)</strong></p>

<p>Serve the any directory over the localhost. You can specify a path to the directory you want to served, or you can just skip it and the current one will be served. Default port is <code class="highlighter-rouge">8021</code>, but you override that from the command line.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>alfred serve    <span class="c"># Serve current directory</span>
</code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>alfred serve --path /path/to/directory/   <span class="c"># Serve directory at given path</span>
</code></pre>
</div>

<p>Now you may be wondering why the additional <code class="highlighter-rouge">serve</code> argument. One word, aesthetics.</p>

<p><strong>Serve single files</strong></p>

<p>It often happens that I just want to serve a single file, and not the whole directory. This can be because either I don’t want you to see what’s in that directory (things better left in the dark <img class="emoji" title=":expressionless:" alt=":expressionless:" src="https://assets.github.com/images/icons/emoji/unicode/1f611.png" height="20" width="20" align="absmiddle" />) or I’m too polite to make you sift through my deeply nested folders or excessive number of files for what you need. So simply,</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>alfred serve --path /path/to/file     <span class="c"># Serve a file</span>
</code></pre>
</div>

<p>Yup, the same syntax. Just make it a path to a file and Alfred will serve it individually.</p>

<p><strong>Share links and text</strong></p>

<p>Another cool thing I always find handy is sharing text snippets, code snippets or links. It’s too cumbersome to share such snippets on WhatsApp or Messenger. And Slack won’t work for people not in your team. So, here’s a quick command for it:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>alfred serve --text <span class="s1">'Lorem ipsum dolor set amit.'</span>
</code></pre>
</div>

<p>There’s actually more than just this, so here’s a table of the parameters and what they do:</p>

<table>
  <thead>
    <tr>
      <th>Arguments</th>
      <th>Purpose</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>-h, –help</td>
      <td>show this help message and exit</td>
    </tr>
    <tr>
      <td>-p <em>PORT</em>, –port <em>PORT</em></td>
      <td>specify port to host server on (default: 8021)</td>
    </tr>
    <tr>
      <td>-c <em>COUNT_MAX</em>, –count-max <em>COUNT_MAX</em></td>
      <td>maximum number of times directory can be served (default: 10000)</td>
    </tr>
    <tr>
      <td>-f, –force-port</td>
      <td>force the server to run on specified port (server won’t start if port unavailable)</td>
    </tr>
    <tr>
      <td>-P <em>PATH</em>, –path <em>PATH</em></td>
      <td>specify path (file or directory) to be served (overrides –directory)</td>
    </tr>
    <tr>
      <td>-t <em>TEXT</em>, –text <em>TEXT</em></td>
      <td>specify text to be served (enter text in quotes)</td>
    </tr>
  </tbody>
</table>

<p>And of couse, all the code is available on <a href="https://github.com/tigerkid001/alfred">Github</a> under MIT License (as usual). So feel free to hack as you will.</p>

<p>Yeah, I know what you’re thinking right now. <em>‘Why on EARTH would someone make such a big deal of so little a thing.’</em> Overkill, I get it. But I guess I just keep adding stuff to it that I often need, and accidentally made it this unnecessarily powerful command ine utility that has really no reason to be so. Ah well, typical me. And guessing by the way I tend to overdo things, you can expect some more “features” added to Alfred (I don’t know them yet either, but let’s see <img class="emoji" title=":wink:" alt=":wink:" src="https://assets.github.com/images/icons/emoji/unicode/1f609.png" height="20" width="20" align="absmiddle" />)</p>

	  ]]></description>
	</item>

	<item>
	  <title>'Gitting' started</title>
	  <link>sidhant.io/gitting-started</link>
	  <author>Sidhant Sharma</author>
	  <pubDate>2016-03-01T00:00:00+05:30</pubDate>
	  <guid>sidhant.io/gitting-started</guid>
	  <description><![CDATA[
	     <p>Recently, I got a chance to be a part of one of the most kick-ass communities, whose software basically rules<br />
the tech world. Yeah, Git. The aim was to get my hands dirty with something new and amazing.<br />
So though this post isn’t as much about my experience there (so far, great), but rather a stash of useful commands that one may require when actually contributing to Git. I’ll keep it updated as often as possible. Though the documentation for getting involved is very educative and covers everything you’re required to do, I decided to write this post since I couldn’t find a complete set of commands (and concepts) we need to actually get started. Man pages are nice, but nothing beats a well written tutorial, right?</p>

<p><strong>TL;DR</strong>: Google it, click the first StackOverflow link, copy-paste the command in the top answer and hit enter. That’ll [make/fix/do] it.</p>

<p>So, here’s how we’re gonna do. First, we’ll walk through the basics of Git in case you want a refresher. Then we move on to the stuff we’ll need very frequently for development. Let’s get started.</p>

<h4 id="getting-started-with-git">Getting started with Git</h4>

<p>First, if you’re not familiar with what Git is and what it’s for, go read <a href="https://www.atlassian.com/git/tutorials/setting-up-a-repository">this</a> Atlassian tutorial to get an idea what we’re dealing with here. Ideally, you should know some basic Git commands before can get started with contributing. Here’s a summary of the important commands and concepts you should have an idea of. For everything else, <strong>RTFM</strong>, or… StackOverflow. If you think you know the basics pretty well, or have read through the Atlassian docs, go ahead skip to the <a href="#the-good-stuff">contributing section</a>:</p>

<p><strong>1. Creating new repo, adding and committing</strong></p>

<p>The first thing you need to do to get started is, no surprise, install Git. If you haven’t installed on your system yet, get it from <a href="http://git-scm.com/downloads/">git-scm downloads</a>.</p>

<p>Now, like a fine English gentlemen, let’s introduce ourselves to the newly installed software, starting with name and email.<br />
This is done as:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>git config --global user.name <span class="s2">"User Name [:nick]"</span>
</code></pre>
</div>

<p>So, if you are John Travolta, with nickname jtrav, you’ll do:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>git config --global user.name <span class="s2">"John Travolta [:jtrav]"</span>
</code></pre>
</div>

<p>You may vary the name string, like remove the colon before the nick, or the nick altogether. I put it there because 1. I like it there, and 2. it tells others your nick in case they wanna reach out on an irc or otherwise. But it’s completely up to you.</p>

<p>Your email-id is as important as your name, especially for the Git community, so here’s what we do:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>git config --global user.email <span class="s2">"&lt;my.email@example.com&gt;"</span>
</code></pre>
</div>

<p>This should be same email ID you would be using for contributing to Git.</p>

<h5 id="pro-tip">PRO TIP:</h5>
<p>If you want to keep this ID separate from your usual id, you can skip the <code class="highlighter-rouge">--global</code> tag and configure the identity details separately for different projects.</p>

<p>Great, now you’re all set to get started.</p>

<p><strong>2. The basics</strong></p>

<p>Now, we need a sample repository to get started with. You can make any regular directory (folder) a git-managed repository by running this simple command.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>git init          <span class="c"># Tell git to initialize this directory as repository</span>
</code></pre>
</div>

<p>For those who like details, this creates a tiny hidden directory by the name <code class="highlighter-rouge">.git</code> in the current directory (which is now, by the way, a repository) that stores a lot of information the current and past states of this repository from this point on.</p>

<p>Now when you run</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>git status
</code></pre>
</div>

<p>it’ll list all the files in the repository in red. This basically means that all the files are although in the directory, but git<br />
is not tracking them yet. So, we simply tell to do so, by</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>git add .
</code></pre>
</div>

<p>The <code class="highlighter-rouge">.</code> tells git to add all files for tracking (more precisely, the staging area). You can add selected files by specifying the path. Now, we commit the changes to make them solid by committing them:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>git commit -m <span class="s2">"A commit message"</span>
</code></pre>
</div>

<p>The <code class="highlighter-rouge">-m</code> let’s you add an inline-comment. If you don’t use that option, your default editor will be opened for you to enter<br />
your commit message in. We try to keep commit messages short descriptive of the changes made in the commit.</p>

<p>Now, we are ready to ‘push’ the changes to a remote, i.e., upload them to your server. If you’re using Github or Bitbucket, it’ll be you’re repository’s link (You can figure it out, it’s no big deal). To add a new remote, we use:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>git remote add origin &lt;link-to-remote&gt;
</code></pre>
</div>

<p>We push local changes to remote using:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>git push origin master
</code></pre>
</div>

<p>Note that here, <code class="highlighter-rouge">origin</code> is the name of the remote, as we added in the second-last command, and <code class="highlighter-rouge">master</code> is the branch<br />
where you are pushing the changes.</p>

<p>If you want to clone a repository hosted somewhere, you can do so by simply using:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>git clone &lt;link-to-repository&gt;
</code></pre>
</div>

<p>To learn more about branching, refer to Atlassian documentation of [branching]. Same goes for other useful commands like<br />
<a href="https://www.atlassian.com/git/tutorials/using-branches/git-branch">branch</a>, <a href="https://www.atlassian.com/git/tutorials/using-branches/git-merge">merge</a>, <a href="https://www.atlassian.com/git/tutorials/rewriting-history/git-rebase">rebase</a>, <a href="https://www.atlassian.com/git/tutorials/using-branches/git-checkout">checkout</a> and <a href="https://www.atlassian.com/git/tutorials/resetting-checking-out-and-reverting/commit-level-operations">reset</a>.</p>

<p>Getting into more detailed description of these commands, and some other you may occasionally need will eventually turn this blog into another version of Git man pages, so we’ll finish the overview here and get started with some dev.</p>

<p><br /><br />
<span id="the-good-stuff"></span></p>

<h4 id="contributing-to-git">Contributing to Git</h4>

<p>The first step you <em>must</em> read the man pages. I can’t emphasize enough, <strong><em>RTFM</em></strong>. Having cloned the Git repo from their <a href="https://github.com/git/git">Github repository</a>, you should definitely read the <a href="https://github.com/git/git/blob/master/README.md">README</a>, the <a href="https://github.com/git/git/blob/master/Documentation/CodingGuidelines">CodingGuidelines</a> and the <a href="https://github.com/git/git/blob/master/Documentation/SubmittingPatches">SubmittingPatches</a> docs. They’ll tell you everything you must know.</p>

<p>Also, it is suggested that you should fork Git’s Github repo and set up hooks for <a href="https://travis-ci.org/">Travis-CI</a>. So, before finally making a patch, you can check that your patch doesn’t break the build for OS X or Linux. It’s fairly easy to use and a free Travis account would serve you well, for both Git development and otherwise.<br />
Now, as promised, the commands. Here we go.</p>

<p>The first thing we need quite often is <code class="highlighter-rouge">diff</code> and <code class="highlighter-rouge">format-patch</code>. <code class="highlighter-rouge">diff</code> is used, as you probably guessed, to diff between two commits, current HEAD and some commit, a single file’s diff over a two commits and more; basically, anything you may need to compare with anything else. Particularly, these get handy:</p>

<p><em>1. Diff between unstaged/uncommited changes and last commit:</em></p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>git diff -- <span class="o">[</span>&lt;path-to-file&gt;]
</code></pre>
</div>

<p>Square brackets indicate optional parameter. You can specify a single file or directory to diff. By default, all changes are diffed against last commit. To diff the current HEAD with any commit, we use:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>git diff commit_id HEAD
</code></pre>
</div>

<p>where commit_id is the sha1 ID of the commit you want to diff HEAD with.<br />
To diff the current HEAD and the last commit (last HEAD), simply use:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>git diff HEAD^ HEAD
</code></pre>
</div>

<p>You can also <code class="highlighter-rouge">diff</code> to generate patches, example this creates a patch for the last commit:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>git diff HEAD^ HEAD &gt; last_commit.patch
</code></pre>
</div>

<p>Another cool thing you can do with diff is check if you introduced extraneous whitespace while making changes.<br />
To do that, just execute:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>git diff --check <span class="o">[</span>commit_1 commit_2]
</code></pre>
</div>

<p><em>2. Formatting patches using <code class="highlighter-rouge">format-patch</code></em></p>

<p>If you’re going to send patches to git, you need to properly format them so they are readable<br />
for all community members, and also adhere to the git standards. For this, an awesome command comes<br />
with git, called <code class="highlighter-rouge">format-patch</code>. This allows you to make an email-ready formatted patch that you can send directly using<br />
<code class="highlighter-rouge">send-email</code> or using another MUA client. More on MUA clients later.</p>

<p>A basic usage of <code class="highlighter-rouge">format-patch</code> is this:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>git format-patch master -1
</code></pre>
</div>

<p>This creates a patch of the last 1 commit on master branch. You can do a lot more than just that make a simple patch for last commit. You can make patches for multiple commits as well. One standard form I use a lot is:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>git format-patch -1 -o ../patches/receive-pack-parse-option-api/ --signoff --in-reply-to<span class="o">=</span><span class="s1">'&lt;message-id&gt;'</span> --patience <span class="o">[</span>-vN]
</code></pre>
</div>

<p>Dissection of the above is as follows, <code class="highlighter-rouge">-1</code> tells git to make patch for last 1 commit. You may use -1commit id, commits relative to HEAD (Like HEAD~5), or a combination of commit ID and number of commits following it. <code class="highlighter-rouge">-o &lt;dir&gt;</code> tell git which directly to put the generated patch in. <code class="highlighter-rouge">--patience</code> tells it to use Patience algorithm (occasionally, patches are not very readable to others when using the default algorithm, so trying another algorithm helps). <code class="highlighter-rouge">--in-reply-to=&lt;message-id&gt;</code> adds an extra line to the patch head, indicating which email is this patch in reply to. It’s usually used for replying to previous versions of your patch. You specify version number of your patch using <code class="highlighter-rouge">-vN</code> where N is the version number (integer, eg -v3). This makes your patch subject look like “[PATCH v3] the commit message”.</p>

<p><em>3. Undo commits</em></p>

<p>If often happens, that you get the patch right in the first try. In such a case, if you have committed the changes already, you want to un-commit them. For that, just do</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>git reset HEAD~n
</code></pre>
</div>
<p>replacing ‘n’ with required number of commits to be undone.<br />
This doesn’t delete the changes as a hard reset would, but simply uncommits them, and places them outside the staging area. This gets in handy when you need to make only slight modifications and commit again.</p>

<p><em>4. Squashing commits</em></p>

<p>So you made 4 commits, but realize that they should ideally belong to one. What do you do? Undo them with <code class="highlighter-rouge">reset</code> and commit again? What if there are conflicts? Fret not, <code class="highlighter-rouge">rebase</code> is to the rescue. So, we simply run</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>git rebase -i &lt;after-this-commit&gt;
</code></pre>
</div>
<p>replacing <after-this-commit> with a commit ID, or something like HEAD~4. In the screen that follows, replace 'pick' on the second and subsequent commits with 'squash' or 'fixup', as described in [the manual](http://git-scm.com/docs/git-rebase#_interactive_mode).</after-this-commit></p>

<p>But what if you accidentally pushed it to your forked repository? That rebase will work for local, but the remote won’t accept it and you’re pretty much back to square one, right? Not quite. Luckily, we can force a push, thus overwriting history of the remote [<em>CAUTION: There are serious implications of remote history rewrite. Try that you never have to use the following command.</em>]. For this, after squashing the commits locally, we push with slight change in syntax as:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>git push gitfork +master
</code></pre>
</div>
<p>where gitfork is the name of your forked repo. The <code class="highlighter-rouge">+</code> tells git to force push only the specified branch, unlike –force, which would force-push all refs.</p>

<p>Again, this isn’t a very good thing to do, so try not to push changes that you aren’t 1000% sure of.</p>

<p><em>5. Sending mail with git</em></p>

<p>Once you’ve prepared a patch and are ready to send it to the mailing list, you well, send it. But how? Your regular email client (GMail, Google Inbox, Outlook) won’t be of much help. That is because most likely, your client uses HTML formatted emails and also supports word-wrapping, and sometime adds extraneous whitespace, which can make patches not apply cleanly. To avoid this, you can either learn to use <code class="highlighter-rouge">git send-email</code> or configure your MUA client for sending correctly formatted patches. I prefer sending patches using send-email, and use Thunderbird for regular emails (though you can configure Thunderbird to format patches) <sup><a href="#note-1">1</a></sup>. First, let’s see the good ol’ command line method. Before we can use it, we need to install git send-email. On Linux, you can do something like</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>sudo apt-get install git-email
</code></pre>
</div>
<p>For other platforms, you may wanna Google it.<br />
Next, we need to configure the email. <a href="http://blog.bisect.de/2012/01/how-to-send-patches-via-git-send-email.html">This</a> blogpost covers it well. I’d only like to add this little thing, if you are going to use a GMail account, you may need to take one extra set to get everything working. You would be needed to go your account settings, and from there enable ‘Access for Less Secure Apps’. That’s it, you’re all set.</p>

<p>Now, to actually send an email, write:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>git send-email ../patches/patch1.patch --to<span class="o">=</span><span class="s1">'git@vger.kernel.org'</span> <span class="o">[</span>--in-reply-to<span class="o">=</span><span class="s1">'&lt;message-id&gt;'</span><span class="o">]</span> <span class="o">[</span>--cc<span class="o">=</span><span class="s1">'someone@example.com'</span><span class="o">]</span>
</code></pre>
</div>

<p>Dissection of the command; <code class="highlighter-rouge">../patches/patch1.patch</code> is the patch you want to send. <code class="highlighter-rouge">--to</code> argument is the person (in this case, mailing list) you want to send the message to. <code class="highlighter-rouge">--in-reply-to</code> comes in handy when: 1. you’re sending multiple patches, in which case you send the consequent patches in reply to the first patch; 2. when you’re sending alternate/updated versions of a patch, which you do again, at the root of the email thread. <code class="highlighter-rouge">--cc</code> allows you to CC people, and you can specify this options multiple times with different argument each time. Other options are quite self-descriptive and the git docs are very well written ;)</p>

<p>That’s it for now. I’ll keep updating this post as find and learn more useful commands like the ones above. If you get stuck at anything, and git man pages don’t help, try Googling it. It’s ok, no one gets it right the first time. Usually, the top answer in the first StackOverflow link does the job.</p>

<p><sup id="note-1">1</sup> For more details on setting up MUA for sending patches, refer to <a href="https://git-scm.com/docs/git-format-patch">format-patch documentation</a>, under the heading ‘MUA Specific Hints’.</p>

<p><br /></p>

<p>Sorry for the long post, here’s a cute potato</p>

<p><img src="/assets/images/post_images/cute_potato.png" alt="Cute Potato" /></p>

	  ]]></description>
	</item>

	<item>
	  <title>The OpenCV Saga</title>
	  <link>sidhant.io/the-opencv-saga</link>
	  <author>Sidhant Sharma</author>
	  <pubDate>2015-10-20T00:00:00+05:30</pubDate>
	  <guid>sidhant.io/the-opencv-saga</guid>
	  <description><![CDATA[
	     <h3 id="ch-1--i-see-you">Ch. 1 : I See You</h3>

<p>College. A temple of knowledge. A place to learn and grow.</p>

<p>Well, not quite. At least not in my experience. Though there isn’t much I’ve gained directly from attending classes (save for the cursory overview to a few subjects), I do admit I have had tonnes of opportunities to learn. And being the ever-curious soul I am, I didn’t miss out out on any.</p>

<p>One such subject that has captured my imagination quite recently is Computer Vision, the magical technology that can make a computer ‘see’.</p>

<p>It started about 2 weeks ago, when my friends and I were brainstorming on what to present as a Minor project. We were running late already (thanks to our first Minor project idea <a href="#minor-one"><sup>1</sup></a>). So, while we were randomly pitching ideas to each other, I suggested making an android application that can print the details of the objects in focus on the screen, in real time. And at this point, we all hopped on to the computer vision train, waving at the stations (aka project ideas) as we passed them. This we did till we reached a project idea that was (seemingly) small, practical and achievable within the given time frame.<br />
The idea was simple. A basic software that will translate your hand gestures into commands for your computer. There was a discussion on what specific type of commands it would support (from general control like navigation through the file system, controlling brightness, volume etc to simply controlling a music application). It was later decided that we will support a rather wild-card entry, Google Chrome browser.<br />
To anyone who follows this blog, Google Chrome would be a surprise. Yes, I know me+Chrome is not a duo you see frequently, but as they say, anything for science.</p>

<p>So, that’s enough backstory. Now on to the good stuff. Being noobs in the field of image processing, we decided to stay with python, for it was more comfortable to most of the team (excluding me, I prefer C/C++. Always.) Anyway, the development started and we did our research,found and discussed some techniques and algorithms.</p>

<p>Fast forward - Coding. The real good stuff.<br />
There are a bunch of OpenCV tutorials available on the Internet, like <a href="http://opencvpython.blogspot.in/">this one</a> and <a href="https://www.pyimagesearch.com/">this one</a>. And of course, never forget to RTFM (OpenCV docs). This gave me a good head start for the task at hand.</p>

<p>I won’t be going into details of the installation process (mainly because it is too boring and I need to catch up on sleep). So, hope you’ll figure it out. (Psst.. unlike me, Google doesn’t sleep)</p>

<h4 id="say-cheese">Say ‘Cheese’!</h4>

<p>First things first. Since our aim is to process gestures in real time, we obviously something to give us some sort of a real-time video input. A modern day contraption that can somehow capture the essence of vision and translate it into a digital stream of bytes. Something so….. screw it, enough Dora-the-explorer. We need a camera. A webcam is the first choice, for it is usually already there on your laptop. It gets tricky when you don’t have a laptop, or a dedicated webcam, as happened with one of our teammates.<br />
Using a webcam with OpenCV is simple, as the following snippet shows:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>
<span class="kn">import</span> <span class="nn">cv2</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>

<span class="c">## Create a capture device instance</span>
<span class="c">## For more:  http://docs.opencv.org/modules/highgui/doc/reading_and_writing_images_and_video.html#videocapture-videocapture</span>
<span class="n">cap</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">VideoCapture</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

<span class="c">## While the capture device is open</span>
<span class="k">while</span> <span class="n">cap</span><span class="o">.</span><span class="n">isOpened</span><span class="p">():</span>
    <span class="c">## Grab a frame (current image in the memory)</span>
    <span class="n">ret</span><span class="p">,</span> <span class="n">frame</span> <span class="o">=</span> <span class="n">cap</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
    <span class="c">## Process as desired</span>

<span class="c">## Release camera object when done</span>
<span class="n">cap</span><span class="o">.</span><span class="n">release</span><span class="p">()</span>
</code></pre>
</div>

<p>But not all hope is lost! Turns out, with a little bit of hacking around, it’s possible to use an android device with a camera for the purpose. <a href="https://play.google.com/store/apps/details?id=com.pas.webcam">Here</a> you can find a marvelous little application, <em>IP Webcam</em>, that allows you to locally stream from your mobile camera. You can simply view the stream on the browser/VLC of another device by keying in the IP and the port of the server you run (using the app).<br />
The tricky part is when you need to use it as a video feed and process it in OpenCV. This is where you need to have a work-around. But don’t worry, I saved you the trouble and whipped up this little script which would be useful. Just clone/download <a href="https://github.com/TigerKid001/AndroidCamFeed">this repo</a> or simply get the <code class="highlighter-rouge">[AndroidCamFeed](https://github.com/TigerKid001/AndroidCamFeed/blob/master/AndroidCamFeed.py)</code> file. The usage is simple and demonstrated in the <a href="https://github.com/TigerKid001/AndroidCamFeed/blob/master/AndroidCamFeed.py"><code class="highlighter-rouge">Example.py</code></a>. Import the module and use like you would use the cv2.VideoCapture; the interface is pretty much the same (which, by the way, is no coincidence). Here’s a snippet for example:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c">## Import AndroidCamFeed module</span>
<span class="kn">from</span> <span class="nn">AndroidCamFeed</span> <span class="kn">import</span> <span class="n">AndroidCamFeed</span>

<span class="c">## set host = address of server, in &lt;IP&gt;:&lt;port&gt; format</span>
<span class="c">## Replace the string with your own server's IP and port</span>
<span class="n">host</span> <span class="o">=</span> <span class="s">'192.168.1.2:8080'</span>

<span class="c">## Create new ACF instance with host as parameter</span>
<span class="n">acf</span> <span class="o">=</span> <span class="n">AndroidCamFeed</span><span class="p">(</span><span class="n">host</span><span class="p">)</span>

<span class="c">## While acf is open</span>
<span class="k">while</span> <span class="n">acf</span><span class="o">.</span><span class="n">isOpened</span><span class="p">():</span>

        <span class="c">## Read frame</span>
        <span class="n">frame</span> <span class="o">=</span> <span class="n">acf</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">frame</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="c">## Process frame</span>

<span class="c">## Must release ACF object before exiting.</span>
<span class="n">acf</span><span class="o">.</span><span class="n">release</span><span class="p">()</span>

</code></pre>
</div>

<h4 id="a-sleight-of-hand">A sleight of hand</h4>

<p>The next step we take towards the goal is detecting the hand. This can be tricky and there a many algorithms that try to achieve this. In my personal experience, transforming the image into Y-Cr-Cb color space is effective, especially when coupled with Gaussian Blur and thresholding using Otsu algorithm. Don’t be overwhelmed, we’ll take them all down piece by piece. Starting with color spaces.</p>

<p>The default input from your capture device is in RGB color space. This is the color space we see the world in, with our eyes. Though there are methods to detect skin (and thereby hand) from this color space, they may not be as effective as the others. So we change the color space of the image to the <a href="https://en.wikipedia.org/wiki/YCbCr">Y-Cr-Cb</a> color space. The transformation can be done with literally one line of code:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>
<span class="n">imgYCC</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">cvtColor</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">cv2</span><span class="o">.</span><span class="n">COLOR_BGR2YCR_CB</span><span class="p">)</span>

</code></pre>
</div>

<p>Now that we have the image in the required format, we need to find a way to identify what range of the  Y-Cr-Cb values gives us the clearest view of the skin. Once we have skin, we can figure out the hand.<br />
There are again many options for finding the sweet spot. I’d recommend you do some reading/innovating of your own and find a range that best suits you. For help, you may consider reading through research papers such as <a href="http://arxiv.org/pdf/1212.0134.pdf">this</a>, <a href="http://people.sabanciuniv.edu/mcetin/publications/malima_SIU06.pdf">this</a> and <a href="https://www.google.co.in/webhp?hl=en#hl=en-IN&amp;q=elliptical+boundary+model+skin+color+detection">this</a>. There are plenty more so you can dig as deep as you want.</p>

<p>I experimented both manually (by setting up trackbars and manually setting values to optimal range) and by using the elliptical boundary model for skin color detection. While manual settings offer a better and finer control, it’s a pain to adjust the values.</p>

<p>So, by now you probably have effectively separated the hand component from the rest of the image. Your resulting image may look something like this:</p>

<p><img src="/assets/images/post_images/SkinMask.jpg" alt="SkinMask.jpg" /></p>

<p>A little rough around the edges eh? To soften the rough edges, we can use this simple morphology snippet:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>
<span class="c">## Used for erosion and dilation</span>
<span class="n">kernel</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="n">size1</span><span class="p">,</span> <span class="n">size2</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">uint8</span><span class="p">)</span>

<span class="c">## Erode then dilate to smoothen out the edges. Check their documentation for more details</span>
<span class="n">frame2</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">erode</span><span class="p">(</span><span class="n">frame</span><span class="p">,</span> <span class="n">kernel</span><span class="p">,</span> <span class="n">iterations</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">frame2</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">dilate</span><span class="p">(</span><span class="n">frame</span><span class="p">,</span> <span class="n">kernel</span><span class="p">,</span> <span class="n">iterations</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>

<span class="c">## Use opening and closing morphological transformations to remove those annoying little dots</span>
<span class="n">frame2</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">morphologyEx</span><span class="p">(</span><span class="n">frame</span><span class="p">,</span> <span class="n">cv2</span><span class="o">.</span><span class="n">MORPH_OPEN</span><span class="p">,</span> <span class="n">kernel</span><span class="p">)</span>
<span class="n">frame2</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">morphologyEx</span><span class="p">(</span><span class="n">frame</span><span class="p">,</span> <span class="n">cv2</span><span class="o">.</span><span class="n">MORPH_CLOSE</span><span class="p">,</span> <span class="n">kernel</span><span class="p">)</span>

</code></pre>
</div>

<p>To smoothen it out more, we use <a href="https://en.wikipedia.org/wiki/Gaussian_blur">Gaussian Blur</a> and then <a href="http://docs.opencv.org/modules/imgproc/doc/miscellaneous_transformations.html">threshold</a> using the <a href="https://en.wikipedia.org/wiki/Otsu's_method">Otsu algorithm</a> as shown:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>
<span class="c">## Here, (x, y) is a tuple denoting the Gaussian kernel size, with Gaussian kernel standard deviation ## in X direction being 0, (for Y direction, it is 0 by default)</span>
<span class="n">imgYCC</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">GaussianBlur</span><span class="p">(</span><span class="n">imgYCC</span><span class="p">,</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">),</span> <span class="mi">0</span><span class="p">)</span>

<span class="c">## Set 0 and 255 to the desired minimum and maximum thresholds. (Psst.. experiment time)</span>
<span class="n">ret</span><span class="p">,</span> <span class="n">imgYCC</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">threshold</span><span class="p">(</span><span class="n">imgYCC</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="n">cv2</span><span class="o">.</span><span class="n">THRESH_OTSU</span><span class="p">)</span>

</code></pre>
</div>
<p><em>yawnnn…</em> OK, so now we have a nice and smooth image to work on. Looking back at it all, it doesn’t look like we have a long way, but believe me, getting here the way we did is big task. Extracting the hand out of an RGB (or BGR, as it used in OpenCV) image is half the job (well, a little less than half, but you get the point). In the next post, we’ll discuss a little more about hand exatraction, specifically blob analysis. Then we’ll continue on to detecting the hand, and experiment with algorithms to accurately detect parts of the hand.</p>

<p>And this is the point where I am looking at you, no expression, a blank poker face, hoping you’ll get the signal, say thanks and bid farewell.. No, I don’t mean you to go, it’s just.. I’m tired and there’s a lot more I’d like to talk about in more detail, but some other time. (Very soon, I promise). So, there you go. You can go on and experiment, research, play/mess with that code.<br />
And if you like, you can even check out our project <a href="http://github.com/TigerKid001/Dex">Dex</a>, as we call it. Help will be much appreciated ;)</p>

<p>As a great wizard once said,</p>

<blockquote>
  <p>Fly, you fools!</p>
</blockquote>

<p>Happy coding :)<br />
<br /><br /></p>

<hr />

<p><strong><sup id="minor-one">1</sup></strong><br />
The first Minor project idea was that of an automated bot that would crack Google’s new NoCaptcha reCaptcha system by imitating organic mouse movements and selecting the correct images for the given keyword. Sadly, it was dropped because of time constraints.</p>

	  ]]></description>
	</item>

	<item>
	  <title>Bling Bling Blink</title>
	  <link>sidhant.io/bling-bling-blink</link>
	  <author>Sidhant Sharma</author>
	  <pubDate>2015-09-15T00:00:00+05:30</pubDate>
	  <guid>sidhant.io/bling-bling-blink</guid>
	  <description><![CDATA[
	     <p>Hey, do you use Google Chrome most of the time? All the time? Good for you. ‘Cause I don’t. I like Firefox better. I have my own reasons (not getting into that here). But you know what, I’m jealous of you. No seriously, I am jealous of Chrome users. I mean, you have an extension for everything. Literally. Need something to dim the webpages at night? Bang! There’s an extension. Need a prettier new tab page? Boom! There you have it. And why do they have to be pretty? Why does every extension in Google Chrome have to be pretty and smooth and bursting with colors? What is it, Disneyland? If you’ve read my last blog post, you’d probably know what this is one is about. This post is about… (drum rolls) … another Firefox add-on. This time, it’s about <a href="https://addons.mozilla.org/en-US/firefox/addon/blink/">Blink</a>. A Firefox add-on I made to make the new tab page more interesting. Here’s how it started:</p>

<p><em>Fading out, Ripple effect, Entering black and white flashback</em></p>

<p>It was a bright sunny day in the city of Delhi. I was in college hanging out with my buddies, happy and oblivious to what was going to happen next. One of them was doing something on his laptop. And there, I saw a glimpse of something so intriguing and enticing, that could not help but ask what that beautiful webpage was called. Turns out, it wasn’t a web page. It was his new tab page. Yes, New Tab. The most heavily-ignored browser tab in the history of computer. My friend told me it was a Chrome extension called <a href="https://tabbie.io/">Tabbie</a>. A lovely piece of software craftsmanship and curios innovation. I wanted it. I needed it. I had to have it. Just like a 6 year old needs that Superman action figure.</p>

<p><em>Ripple effect.. Fade back in.. Back to the <strike>future</strike> present</em></p>

<p>But alas, no one cares to make pretty extensions for Firefox. ‘No problem, I’ll make one’ said a voice inside my head. And there it started.</p>

<p>There were already some New Tab replacement add-ons for Firefox, but nothing like what I wanted. Oh, did I forget to tell what Tabbie (and now Blink) do? Silly me. Well, you know how there’s a tonne of websites and webpages you follow to keep you updated with stuff you like? You might enjoy some beautiful art and animations from Dribbble, or some tech news from TechCrunch or the likes. That’s exactly what they do. These extensions bring the latest news from around the world right to your New Tab page. Why new tab page? Because that is the one page you open the most, and yet never pay attention to. It’s the perfect spot to put some nice content and grab your attention. So there I was, spending most of my spare time in searching and experimenting things for Blink. If you read my [previous post] on Firefox add-ons, you’re probably all set already. If not, you might wanna go there and take a loot at how things are done in Firefox Add-on development. Simple stuff, Javascript mainly.  There were a few key checkpoints I am particularly fond of. So, here they are:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>                                <span class="nt">&lt;geek&gt;</span>
</code></pre>
</div>
<p><strong>1.</strong><br />
Clearing the URL bar when opening a custom New Tab page. One thing we don’t want is to see an ugly url in the URL bar of the New Tab page. It should be empty, without fail. To do that in Firefox, we can use gInitialPages list of the browser. Adding a URL to this list makes Firefox show it as a blank url. So, adding our custom New Page’s url to this list should serve our purpose well. Here’s a code snippet that shows how to do this,</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="kr">const</span> <span class="nx">clearTabUrl</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">windows</span> <span class="o">=</span> <span class="nx">windowMediator</span><span class="p">.</span><span class="nx">getEnumerator</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
    <span class="k">while</span> <span class="p">(</span><span class="nx">windows</span><span class="p">.</span><span class="nx">hasMoreElements</span><span class="p">())</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="nb">window</span> <span class="o">=</span> <span class="nx">windows</span><span class="p">.</span><span class="nx">getNext</span><span class="p">();</span>
        <span class="k">if</span><span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">gInitialPages</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">newTabURL</span><span class="p">)</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
            <span class="nb">window</span><span class="p">.</span><span class="nx">gInitialPages</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">newTabURL</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>
</div>

<p>That does the trick. You see that I saved the current New Tab url for later use. That’s because currently the user cannot manually change the newtab.url property (unless they edit it from about:config page). So, it is very important to remove your url from this list when your add-on is uninstalled/disabled in order to restore previous settings. For that, we can simply set an unload listener for the add-on and remove the url from it. Something like</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="kr">const</span> <span class="nx">clearSettings</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">services</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s2">"browser.newtab.url"</span><span class="p">,</span> <span class="nx">oldNewTab</span><span class="p">);</span>
    <span class="kd">let</span> <span class="nx">windows</span> <span class="o">=</span> <span class="nx">windowMediator</span><span class="p">.</span><span class="nx">getEnumerator</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
    <span class="k">while</span> <span class="p">(</span><span class="nx">windows</span><span class="p">.</span><span class="nx">hasMoreElements</span><span class="p">())</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="nb">window</span> <span class="o">=</span> <span class="nx">windows</span><span class="p">.</span><span class="nx">getNext</span><span class="p">();</span>
        <span class="k">if</span><span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">gInitialPages</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">newTabURL</span><span class="p">)</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
            <span class="nb">window</span><span class="p">.</span><span class="nx">gInitialPages</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">gInitialPages</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">newTabURL</span><span class="p">),</span> <span class="mi">1</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>
</div>

<p>Ok, hate to admit, but I’m not a genius. I didn’t figure this out by myself. The credit goes to this post on <a href="https://mike.kaply.com/2012/06/21/best-practices-for-overriding-the-new-tab-page-with-your-extension/">Michael Kaply’s blog</a>. Check it out for more on overriding the new tab page <sup><a href="#new-sdk">1</a></sup>.</p>

<p><strong>2.</strong><br />
Another thing I’m particularly excited about is that Blink allows the users to configure their feeds. That is, you can add new content to your feed simply by adding the link to its RSS feed. (Yeah, Blink works on RSS). Making that part of Blink was a brainer. Not because it’s tough, but because it’s not so intuitive. I’ll give you a hint on how I managed it: simple-storage module and message-passing. Got it? No? Chill, the code for it is here. See the two pagemods and a couple of scripts that run when certain pages are loaded? That’s it. Those scripts are doing a classic Firefox add-on style message passing dance. That’s new feeds can be added and unwanted be removed, by just passing around the list of desired feeds.<br />
Parsing the feed.</p>

<p><strong>3.</strong><br />
I know covering this would basically cover the whole add-on code, but sorry, can’t help it. This is the part I learned partly from here and partly by experimenting with Google Feed API and the DOM API. For a quick run-through, check this code out:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">addContent</span><span class="p">(</span><span class="nx">url</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"Parsing feed from: "</span> <span class="o">+</span> <span class="nx">url</span><span class="p">);</span>
  <span class="kd">var</span> <span class="nx">container</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'cards-container'</span><span class="p">);</span>
  <span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
    <span class="na">url</span><span class="p">:</span><span class="s1">'https://ajax.googleapis.com/ajax/services/feed/load?v=1.0&amp;num=10&amp;callback=?&amp;q='</span> <span class="o">+</span>
        <span class="nb">encodeURIComponent</span><span class="p">(</span><span class="nx">url</span><span class="p">),</span>
    <span class="na">dataType</span><span class="p">:</span> <span class="s1">'json'</span><span class="p">,</span>
    <span class="na">success</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">responseData</span><span class="p">.</span><span class="nx">feed</span><span class="p">.</span><span class="nx">entries</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">title</span> <span class="o">=</span> <span class="nx">value</span><span class="p">.</span><span class="nx">title</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">imageSource</span> <span class="o">=</span> <span class="nx">getImageSource</span><span class="p">(</span><span class="nx">value</span><span class="p">.</span><span class="nx">content</span><span class="p">);</span>
        <span class="kd">var</span> <span class="nx">contentSnippet</span> <span class="o">=</span> <span class="nx">value</span><span class="p">.</span><span class="nx">contentSnippet</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">link</span> <span class="o">=</span> <span class="nx">value</span><span class="p">.</span><span class="nx">link</span><span class="p">;</span>
        <span class="c1">// create card</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">title</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="nx">link</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span> <span class="nx">cardsource</span> <span class="o">=</span> <span class="nx">newHope</span><span class="p">(</span><span class="nx">title</span><span class="p">,</span> <span class="nx">imageSource</span><span class="p">,</span> <span class="nx">contentSnippet</span><span class="p">,</span> <span class="nx">link</span><span class="p">);</span>
          <span class="kd">var</span> <span class="nx">card</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">'div'</span><span class="p">);</span>
          <span class="nx">card</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s2">"class"</span><span class="p">,</span> <span class="s2">"col s12 m4"</span><span class="p">);</span>
          <span class="nx">card</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">cardsource</span><span class="p">);</span>
          <span class="nx">container</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">card</span><span class="p">);</span>
        <span class="p">}</span>
      <span class="p">});</span>
    <span class="p">},</span>
    <span class="na">error</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">jqXHR</span><span class="p">,</span> <span class="nx">textStatus</span><span class="p">,</span> <span class="nx">errorThrown</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"jqXHR: "</span> <span class="o">+</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">jqXHR</span><span class="p">)</span> <span class="o">+</span>
                    <span class="s2">"\nstatus: "</span> <span class="o">+</span> <span class="nx">textStatus</span> <span class="o">+</span> <span class="s2">"\nerror: "</span> <span class="o">+</span> <span class="nx">errorThrown</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">});</span>
<span class="p">}</span>
</code></pre>
</div>

<p>The method calls for getting card and image facilitate creating the material cards in which the news items are shown. It uses the <a href="http://materializecss.com/">Materialize CSS</a> framework. You can check the full code out <a href="https://github.com/TigerKid001/Blink/blob/master/data/sources/js/contentFiller.js">here</a>.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>                                    <span class="nt">&lt;/geek&gt;</span>
</code></pre>
</div>

<p>So, that was that. Blink is available <a href="https://addons.mozilla.org/en-US/firefox/addon/blink/">here</a> for your evaluation. It’s ready for use by people, even though just v0.2.1 (It’s stable, don’t worry). Want a sneek-peak right away? here:</p>

<p><img src="/assets/images/post_images/blink_home_v0.2.1.png" alt="Blink Home" /></p>

<p>There are a couple more features I want to add to Blink. And honestly, I too feel a complete UI overhaul is required. But because of the imminent change in the Firefox SDK as declared by Mozilla <a href="https://blog.mozilla.org/addons/2015/08/21/the-future-of-developing-firefox-add-ons/">here</a>, some API features will be removed. (The one that concerns Blink, and even Owl for that matter, is the Chrome authority). So, I’ll pause the development of Blink till I know better. Feel free to check out the Blink’s source on Github, it’s under MIT License, so mess with it as you will!</p>

<p>See you soon.<br />
Stay Hungry, stay foolish!</p>

<p><br /><br /><br />
<sup>1</sup>: Since the writing of this post, a lot has changed in this part of the SDK. The above code worked only uptil Fx44.0. You might wanna look at Blink’s <a href="https://github.com/tigerkid001/blink">current source</a> or search <a href="https://stackoverflow.com">StackOverflow</a> for a more recent method.</p>

	  ]]></description>
	</item>

	<item>
	  <title>Into the darkness</title>
	  <link>sidhant.io/into-the-darkness</link>
	  <author>Sidhant Sharma</author>
	  <pubDate>2015-06-29T00:00:00+05:30</pubDate>
	  <guid>sidhant.io/into-the-darkness</guid>
	  <description><![CDATA[
	     <p>Being a software developer usually means long hours of working on computer, staring at the screen as if the meaning of life was hidden somewhere in those lines of code. But developer or not, looking at bright screens for longer durations is very straining to the eyes for everyone. So I prefer setting my IDE’s theme to Darkula, or a similar dark theme, to save my eyes from being scorched. And have to admit, it’s very cozy. The nice and dark background with dim-florescent text soothes the eye like the cool brook water to the lonely traveler.</p>

<p>All looks fine so far, but then suddenly, there is this function I need to use, but I can’t remember it’s correct usage. Or a weird error I haven’t seen before, and I can’t figure it out. And the only way out? Google. This is where the problem arises. The Internet has somehow developed a fondness towards bright white/ off-white backgrounds. Every typical website has a pale white background and text in black, links in blue. Regular Internet standards, can’t complain. But for someone who is just switching from a dark IDE screen to the browser, this transition can torch the eyes. (You’re more likely to understand this if you too like dark themes for your IDEs, or work a lot with Photoshop or Illustrator.)<br />
And then one day, I decided I’ve had enough. I <em>needed</em> something to turn those glaring websites dark. Thus began a quest for browser extensions. I use Firefox as my default browser, <a href="http://addons.mozilla.org/">AMO</a> my only hope. Surprisingly enough, I couldn’t find an add-on that would do what I needed done. There were some that made an overlay on the webpage and displayed only the main content, doing away with distracting images and links. But nah, this ain’t what I want.</p>

<p>So I figured, “Hey, if there isn’t a good add-on out there to do this, why not make one for myself”. And in this moment, the idea of Owl was born. I began with Mozilla’s blog post <a href="https://blog.mozilla.org/addons/2014/06/05/how-to-develop-firefox-extension/">“How to develop a Firefox extension”</a> and realized that this mini-project needs JavaScript. And I don’t know JS. Yet.</p>

<p>First things first, I took a Udacity course on <a href="https://www.udacity.com/course/javascript-basics--ud804">JavaScript Basics</a> (nice course, too easy). Now that I had a basic idea of js, it was time to code.<br />
I guess I’ll take a slight detour from the story and get you familiar with the Firefox add-on development process. First, you need to get the <a href="https://developer.mozilla.org/en-US/Add-ons/SDK/Tutorials/Installation">SDK</a>. Installation is simple, and the documentation fantastic. Just follow the link above and you’d be ready for dev even before you know it. (Psst.. One more thing, might wanna take a look at <a href="https://developer.mozilla.org/en-US/Add-ons/SDK/Tutorials/Getting_Started_(jpm)">jpm</a>. )<br />
Installed and ready? Great. Let’s get our hand dirty with some code. To create a new add-on skeleton (booooo….skeleton…boooo..), pull up terminal and do</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>mkdir hellworld-addon
</code></pre>
</div>
<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span><span class="nb">cd </span>helloworld-addon
</code></pre>
</div>
<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>jpm init              <span class="c"># initialized a new add-on skeleton</span>
</code></pre>
</div>

<p>Now JPM will ask you (a lot of) questions about the add-on you’re making. Put in whatever you want, or just keep hitting Enter for defaults. You can always change them later in the <code class="highlighter-rouge">package.json</code>.</p>

<p>Tada, a new add-on has been created. But it doesn’t do much yet.<br />
Anyways, back to the story. I too followed these steps and created skeleton for Owl add-on. Now comes the cool part. Code.</p>

<p>I need a piece of code that would change the background of the whole webpage to some dark color I want, and change the text and link colors accordingly. For this, I came with my first amateur solution. We know that HTML webpages contain div-elements. Sometimes, lots of them. What if we iterate through all the div-elements of the webpage, and set a dark background for each of them. The code looked something like this:</p>

<pre><code class="language-JavaScript">var divs = document.getElementsByTagName("div");

for(var i = 0; i &lt; divs.length; i++){

   divs[i].style.backgroundColor = 'black';

}
</code></pre>

<p>To compile and run an add-on, we simple execute</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>jpm run
</code></pre>
</div>

<p>If you’re on Linux (or Mac OS X), the run operation may fail saying</p>

<div class="highlighter-rouge"><pre class="highlight"><code>JPM <span class="o">[</span>error] Specify a Firefox binary to use with the <span class="sb">`</span>-b<span class="sb">`</span> flag.
JPM <span class="o">[</span>error] Error: spawn ENOENT
</code></pre>
</div>

<p>This happens when jpm doesn’t know where Firefox is installed. To specify it the location of the Firefox binary, use the <code class="highlighter-rouge">-b</code> flag as:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>jpm run -b &lt;path/to/file&gt;
</code></pre>
</div>

<p>The results were, well, bad. It worked well on Google homepage. But that was about it. Everywhere else, one or the other element was left out. This wasn’t working. At all.<br />
So, back to the thinking chair. While surfing through the Add-on SDK documentation, I discovered that it was also possible to add CSS dynamically to webpages. So I dug a little deeper and figured out a way to add a seemingly-alright CSS to the webpages when they load. This time, the results were better. But still, no. Something wasn’t working. (Actually, a lot it wasn’t). Sometimes there’d be no change at all, sometimes the whole webpage would turn black. So Plan B failed too.</p>

<p>Nevertheless, the need to protect my (rather our) eyes from the glaring white webpages was strong enough to keep me looking. A week later, I stumbled upon <a href="https://developer.mozilla.org/en/docs/Using_the_Stylesheet_Service">this</a>. Doesn’t look like much, but it is actually a way to attach style sheets to a webpages without disturbing other content. So, there I was trying to make this work. Thanks a good example I found online (sorry, lost the link), I wrote (copied) a CSS style sheet that could modify the webpage’s theme to what I want. (The final CSS I decided on was <a href="https://github.com/TigerKid001/Owl/blob/master/data/owlTheme.css">this</a>). Compile and run. Fingers crossed.</p>

<p>Great Scott! It works! Though a couple of glitches, (some icons/images disappeared) but it was waaay better that any of the previous attempts. “That’s it!”, I said to myself. Now, all I need is an icon for this extension, and it’s ready to be published. Quick google search of ‘owl cartoon’ gave a cute looking owl with big-bright eyes. I knew this is the one. Got the image, quickly edited with GIMP, made grayscale versions and done! There we have it.<br />
To publish an extension, we are needed to bundle it up in .xpi file. Again, terminal to the rescue:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>jpm xpi
</code></pre>
</div>

<p>And there we have the xpi. Now, simply drag and drop this xpi into Firefox and it’ll install automatically. There you go, a ready-to-use homebrew add-on.</p>

<p>Having made the add-on, I decided to publish it online, to the AMO. You know, maybe there are other people who need this? So I went ahead and published it <a href="https://addons.mozilla.org/en-US/firefox/addon/owl/">here</a>.<br />
Not even a week passed since I put it up online, when I got this email from <a href="http://www.ilovefreesoftware.com/">I <span>♥</span> Free Software</a> (a nice tech blog) that they have used my add-on and they really liked it :). They even sent me a badge to show off!</p>

<p><img src="/assets/images/post_images/ilfs_review_badge.png" alt="I love Free Software 5-Star badge" /></p>

<p>Is this amazing or what! Shout out to <a href="http://www.ilovefreesoftware.com/">I <span>♥</span> Free Software</a> for their awesome review.</p>

<p>Signing off now,<br />
Enjoy!</p>

<p>PS: The source code of the add-on is available on <a href="https://github.com/TigerKid001/Owl">Github</a> under MIT License. Feel free to play with it :)</p>

	  ]]></description>
	</item>


</channel>
</rss>
